Open issues / Plans / TODO
==========================

Visible changes
---------------

### Projecting engravings onto objects

It would be nice to be able to project a planar engraving (e.g. from a
DXF file) onto a trimesh model (e.g. from an STL file). Combining the
EngraveCutter (following lines) with a DropCutter (following heights)
and moving each point of the resulting toolpath down the z axis should
do the trick.

### Tool change settings

It should be possible to define some settings regarding a tool change:

-   tool change position
-   tool length sensor properties

Maybe the code can get some inspiration from the tool change code of
[gcnccam](http://sourceforge.net/projects/gcnccam/). Another interesting
forum thread: [at
cnczone](http://www.cnczone.com/forums/archive/index.php/t-62423.html)

### Modularize the GUI code

Currently the GUI code (see *src/pycam/Gui/Project.py*) is huge and hard
to maintain. We should try to split it somehow. Maybe a plugin/extension
interface would help?

### Performance

The ContourFollowStrategy is currently quite slow. I guess, we could
optimize the collision detection or the triangle filtering. The psutil
stats (to be created via the *--profiling* parameter) would help to
analyze performance bottlenecks.

### Python sandbox

The server mode allows execution of arbitrary python code, thus it could
be harmful for providers of PyCAM servers. A kind of sandbox would be
helpful. Maybe one of the following projects could be useful:

-   <http://pypi.python.org/pypi/apipkg>
-   <http://pypi.python.org/pypi/RestrictedPython/>
-   <http://code.google.com/intl/de/appengine/docs/python/runtime.html>
-   a Java sandbox? (http://www.jython.org/)

### Flat plane detection

It should be useful to collect connected triangles sharing the same
normal (= a plane) and put a processing grid on top of it. This plane
can be flat or inclined (but not vertical). A maximum deviance would be
necessary to determine the line width.

### Single-line font support

QCAD implements support for CXF fonts. See some example font files
[here](http://www.linuxcnc.org/dropbox/cxf_fonts.tgz). Maybe this [code
snippet](http://wiki.linuxcnc.org/uploads/engrave-11.py) could be a
starting point. Probably it would be nicer, if inkscape or other 2D
vector programs would support CXF fonts, but it currently does not look
like this will would happen soon.

As a first step, these fonts could be used together with 2D contour
models for engravings. Later we could implement the projection of text
onto 3D models. (see above)

### OpenGL

#### vertex buffers

A speedup of the OpenGL rendering for big models would be nice. Thus
using [vertex buffers](http://www.opengl.org/wiki/Vertex_Buffer_Object)
is probably a good idea. Somehow this can probably also be used for
improving the visualization.

#### Orthogonal view - aspect ratio

The orthogonal (non-perspective) view (see PyCAM's preferences window)
does not respect the aspect ratio of the model. Thus a square only looks
like a square, if the view window is a square. Otherwise it turns into a
rectangle.

#### Orthogonal view - shift/rotate/zoom

Shifting the view in orthogonal view is somehow aligned to the x/y/z
axes. Thus the view window can't be used in an intuitive way. The same
partly applies to rotation and zoom.

#### Beautification

The OpenGL view in general does not really look pretty (compared to
something like [HeeksCAD](http://heekscad.org) or others). This could be
somehow related to lighting or textures or whatever?

### Multiprocessing for Windows standalone executable

Currently (v0.4) the multiprocessing features (parallel processing and
server mode) do not work with the Windows standalone executable. The
reasons are currently not known ...

Internal changes / Code refactoring
-----------------------------------

### Create a real class for Toolpath handling

The toolpaths in the current *ToolPathList* list should be put in a
better data structure: that way the “move to safetyheight” in the code
should not be necessary, and could be generated by the GCODE exporter.

This would also enable the reordering of the output toolpaths to
optimize for time.

### Various small notes

The following list is taken from the *README.TXT* file in trunk (r202):

-   short-circuit the plane/triangle/line/edge/point/vertex tests, so
    that when the result is known, no further intersections are
    calculated
-   make Cutters have a “color” so that for each x in
    plane/triangle/line/edge/point/vertex the result of an intersection
    (cutter,x,color) is cachable (i.e. each Cutter.moveto should change
    the color, just increasing an “int color” should be ok)
